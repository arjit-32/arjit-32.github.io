---
import { getCollection } from 'astro:content'
import BaseLayout from '@/layouts/BaseLayout.astro'

export async function getStaticPaths() {
	const projects = await getCollection('projects')
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: { project },
	}))
}

const { project } = Astro.props
const { Content } = await project.render()
---

<BaseLayout title={project.data.title} description={project.data.description}>
	<div class="mb-8">
		<a href="/projects/" class="text-sm text-muted-foreground hover:text-primary transition-colors mb-4 inline-block">&larr; Back to projects</a>
		<h1 class="text-3xl font-bold tracking-tight mb-2">{project.data.title}</h1>
		<p class="text-muted-foreground text-lg mb-4">{project.data.description}</p>
		
		<div class="flex flex-wrap gap-4 mb-6">
			{project.data.link && (
				<a href={project.data.link} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90">
					Live Demo
				</a>
			)}
			{project.data.github && (
				<a href={project.data.github} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center rounded-md border border-input bg-transparent px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground">
					GitHub Repo
				</a>
			)}
		</div>
		
		<div class="flex flex-wrap gap-2">
			{project.data.tags.map(tag => (
				<span class="inline-flex items-center rounded-sm bg-secondary px-2 py-0.5 text-xs font-medium text-secondary-foreground">
					{tag}
				</span>
			))}
		</div>
	</div>

	<article class="prose dark:prose-invert prose-stone max-w-none">
		<Content />
	</article>
</BaseLayout>
