---
import BaseLayout from '@/layouts/BaseLayout.astro'
import { getCollection } from 'astro:content'
import { siteConfig } from '@/site-config'

const articles = (await getCollection('articles'))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())

---

<BaseLayout title="Articles">
  <div class="space-y-6">
    <h1 class="text-3xl font-bold tracking-tight">Articles</h1>
    <p class="text-muted-foreground">Thoughts on software development, design, and more.</p>
    
    <div class="space-y-8 mt-10">
      {articles.map((article) => (
        <article class="flex flex-col gap-2 border-b border-border/40 pb-8 last:border-0 hover:bg-muted/30 p-4 -mx-4 rounded-md transition-colors">
          <div class="flex flex-col sm:flex-row gap-2 sm:items-baseline justify-between">
            <h2 class="text-xl font-semibold">
              <a href={`/articles/${article.slug}/`} class="hover:underline decoration-primary underline-offset-4">
                {article.data.title}
              </a>
            </h2>
            <time datetime={article.data.publishDate.toISOString()} class="text-sm text-muted-foreground tabular-nums shrink-0">
              {article.data.publishDate.toLocaleDateString(siteConfig.date.locale, {
                year: "numeric",
                month: "long",
                day: "numeric"
              })}
            </time>
          </div>
          <p class="text-muted-foreground">
            {article.data.description}
          </p>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>
